@model StreamWorld.Models.Artista

@{
    ViewData["Title"] = Model.Nome;
    var producoesComoDiretor = ViewBag.ProducoesComoDiretor as IEnumerable<StreamWorld.Models.Producao> ?? Enumerable.Empty<StreamWorld.Models.Producao>();
}

<div class="container my-4">
    <div class="row">
        <!-- Coluna da Foto -->
        <div class="col-md-4 mb-4">
            @if (!string.IsNullOrEmpty(Model.LinkFoto))
            {
                <img src="@Model.LinkFoto" class="img-fluid rounded shadow" alt="@Model.Nome" style="width: 100%; max-height: 500px; object-fit: cover;">
            }
            else
            {
                <div class="bg-secondary rounded shadow d-flex align-items-center justify-content-center" style="width: 100%; height: 400px;">
                    <i class="bi bi-person-circle" style="font-size: 10rem; color: #6c757d;"></i>
                </div>
            }
        </div>

        <!-- Coluna das Informa√ß√µes -->
        <div class="col-md-8">
            <h1 class="mb-3 text-light">@Model.Nome</h1>
            
            <div class="mb-3">
                @if (Model.Tipo == "Diretor")
                {
                    <span class="badge bg-warning text-dark fs-6">Diretor</span>
                }
                else
                {
                    <span class="badge bg-info fs-6">Artista</span>
                }
            </div>

            <div class="card mb-4" style="background-color: #2b2b2b; border: 1px solid #444;">
                <div class="card-body">
                    <h5 class="card-title text-light mb-3">üìã Informa√ß√µes Pessoais</h5>
                    <hr style="border-color: #555;">
                    
                    <div class="row">
                        <div class="col-12 mb-3">
                            <p class="mb-2 text-light">
                                <strong style="color: #bb86fc;">Nome Completo:</strong><br>
                                <span style="font-size: 1.1rem;">@Model.Nome</span>
                            </p>
                        </div>
                    </div>

                    @if (Model.DataNascimento.HasValue)
                    {
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="mb-2 text-light">
                                    <strong style="color: #bb86fc;">Data de Nascimento:</strong><br>
                                    <span style="font-size: 1.1rem;">@Model.DataNascimento.Value.ToString("dd/MM/yyyy")</span>
                                    <span class="text-muted ms-2">(@((DateTime.Now.Year - Model.DataNascimento.Value.Year)) anos)</span>
                                </p>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="mb-2 text-muted">
                                    <strong style="color: #bb86fc;">Data de Nascimento:</strong><br>
                                    <span>N√£o informado</span>
                                </p>
                            </div>
                        </div>
                    }
                    
                    @if (!string.IsNullOrEmpty(Model.PaisOrigem))
                    {
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="mb-2 text-light">
                                    <strong style="color: #bb86fc;">Pa√≠s de Origem:</strong><br>
                                    <span style="font-size: 1.1rem;">üåç @Model.PaisOrigem</span>
                                </p>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="mb-2 text-muted">
                                    <strong style="color: #bb86fc;">Pa√≠s de Origem:</strong><br>
                                    <span>N√£o informado</span>
                                </p>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- Produ√ß√µes como Diretor -->
            @if (producoesComoDiretor.Any())
            {
                <div class="card bg-dark border-secondary mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Produ√ß√µes como Diretor</h5>
                        <hr>
                        <div class="list-group">
                            @foreach (var prod in producoesComoDiretor)
                            {
                                <a asp-controller="Products" asp-action="Details" asp-route-id="@prod.Id" 
                                   class="list-group-item list-group-item-action bg-secondary text-light mb-2 rounded">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">@prod.Titulo</h6>
                                        @if (prod.AnoCriacao.HasValue)
                                        {
                                            <small>@prod.AnoCriacao.Value</small>
                                        }
                                    </div>
                                    @if (prod.Genero != null)
                                    {
                                        <small class="text-muted">@prod.Genero.Nome</small>
                                    }
                                </a>
                            }
                        </div>
                    </div>
                </div>
            }

            <!-- Produ√ß√µes como Artista -->
            @if (Model.ProducaoArtistas != null && Model.ProducaoArtistas.Any())
            {
                <div class="card bg-dark border-secondary mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Produ√ß√µes como Artista</h5>
                        <hr>
                        <div class="list-group">
                            @foreach (var pa in Model.ProducaoArtistas)
                            {
                                @if (pa.Producao != null)
                                {
                                    <a asp-controller="Products" asp-action="Details" asp-route-id="@pa.Producao.Id" 
                                       class="list-group-item list-group-item-action bg-secondary text-light mb-2 rounded">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h6 class="mb-1">@pa.Producao.Titulo</h6>
                                            @if (pa.Producao.AnoCriacao.HasValue)
                                            {
                                                <small>@pa.Producao.AnoCriacao.Value</small>
                                            }
                                        </div>
                                        @if (pa.Producao.Genero != null)
                                        {
                                            <small class="text-muted">@pa.Producao.Genero.Nome</small>
                                        }
                                    </a>
                                }
                            }
                        </div>
                    </div>
                </div>
            }

            @if (!producoesComoDiretor.Any() && (Model.ProducaoArtistas == null || !Model.ProducaoArtistas.Any()))
            {
                <div class="alert alert-info">
                    Este artista ainda n√£o est√° vinculado a nenhuma produ√ß√£o.
                </div>
            }

            <a asp-action="Index" class="btn btn-outline-custom">
                <i class="bi bi-arrow-left"></i> Voltar para Artistas
            </a>
        </div>
    </div>
</div>

<style>
    .list-group-item:hover {
        transform: translateX(5px);
        transition: transform 0.2s ease;
    }
</style>
